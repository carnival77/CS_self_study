# 주기억장치 할당 기법

- [주기억장치 할당 기법](#주기억장치-할당-기법)
  - [개념](#개념)
  - [주기억장치 할당 기법 분류](#주기억장치-할당-기법-분류)
    - [연속 할당 기법(`Contigous Memory Location`)](#연속-할당-기법contigous-memory-location)
    - [분산 할당 기법 = `비연속적 메모리 할당`(`Non-contigous Memory Location`)](#분산-할당-기법--비연속적-메모리-할당non-contigous-memory-location)
    - [단일 분할 할당 기법](#단일-분할-할당-기법)
      - [경계 레지스터](#경계-레지스터)
      - [swapping](#swapping)
    - [다중 분할 할당 기법](#다중-분할-할당-기법)
      - [고정 분할 할당 기법(정적 할당 기법)](#고정-분할-할당-기법정적-할당-기법)
      - [가변 분할 할당 기법(동적 할당 기법)](#가변-분할-할당-기법동적-할당-기법)


## 개념

> 프로그램이나 데이터를 실행시키기 위해 주기억장치에 어떻게 할당할 것인지에 대한 내용

## 주기억장치 할당 기법 분류

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FETzCJ%2FbtqNQ2Cy2sY%2Fg5bIRmyzzlydPy3Ca7EIAk%2Fimg.png)


### 연속 할당 기법(`Contigous Memory Location`)

> 프로그램을 주기억장치에 연속으로 할당하는 기법

종류

- 단일 분할 할당 기법
- 다중 분할 할당 기법

### 분산 할당 기법 = `비연속적 메모리 할당`(`Non-contigous Memory Location`)

> 프로그램을 특정 단위의 조각으로 나누어 주기억장치 내에 분산하여 할당

종류

- 페이징 기법
- 세그먼테이션 기법

### 단일 분할 할당 기법

> 주기억장치를 운영체제 영역과 사용자 영역으로 나누어 한순간에는 오직 한 명의 사용자만이 주기억장치의 사용자 영역을 사용

- 운영체제를 보호하고, 프로그램이 사용자 영역만을 사용하기 위해 운영체제 영역과 사용자 영역을 구분하는 **경계 레지스터**가 사용
- 프로그램의 크기가 작을수록 사용자 영역 낭비
- 종류
  - 오버레이 기법 : 주기억장치보다 큰 사용자 프로그램을 실행하기 위한 기법
  - **스와핑** 기법 : 하나의 프로그램 전체를 주기억장치에 할당하여 사용하다 필요에 따라 다른 프로그램과 교체

#### 경계 레지스터

> 사용자 영역에 있는 사용자 프로그램이 운영체제 영역에 접근하지 못하도록 보호하는 레지스터. 사용자 영역이 시작되는 주소를 기억

#### swapping

> 프로세스를 메모리에서 쫒아 내고, 필요할 때 다시 메모리로 가져오는 기법으로 부족한 메모리 공간으로 인해 사용하는 방법이다. 이때 쫒겨난 프로세스가 보관되는 영역을 스왑 영역이라고 한다.

  -   swap-out : 프로세스를 메모리에서 쫒아내 스왑 영역에 저장
  -   swap-in : 스왑 영역에서 다시 주 기억장치(RAM)으로 불러오는 과정
  -   swap 에는 큰 디스크 전송시간이 필요하기 때문에 현재에는 메모리 공간이 부족할때 Swapping 이 시작된다.
  -   문맥 교환으로 인한 오버헤드가 발생할 수 있고 속도가 느려지지만, 메모리 공간 확보에는 효율적

### 다중 분할 할당 기법

#### 고정 분할 할당 기법(정적 할당 기법)

프로그램을 할당하기 전에 운영체제가 주기억장치의 사용자 영역을 여러 개의 고정된 크기로 분할하고 준비상태 큐에서 준비중인 프로그램을 각 영역에 할당하여 수행하는 기법

-   메모리를 동일한 크기로 자른 뒤, 각 프로세스마다 블럭 하나만 주는 방식입니다. 전체 메모리가 N분할 되었다면 적재될 수 있는 프로세스도 최대 N개이므로 `다중 프로그래밍 정도는 블럭의 개수`와 같으며, 모든 프로세스는 `할당된 메모리 크기가 서로 같습니다`. 현대에서는 사용되지 않는 방식입니다.

![Untitled](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FKNbQU%2FbtqNSzs76MM%2FQfHaVDFGBIsgVgnNKKKG61%2Fimg.png)

-   장점 : 관리가 수월
-   단점 : 할당된 영역 중 쓸모없는 공간이 발생할 수 있다. (내부 단편화)
-   ex) Paging

#### 가변 분할 할당 기법(동적 할당 기법)

- 주기억장치를 미리 분할해 놓지 않고 프로그램을 주기억장치에 적재하면서 필요한 만큼의 크기로 영역을 분할하는 기법
- 고정 분할 할당 기법의 단편화를 줄이기 위해 사용됨

-   고정 할당과 달리 각 프로세스에게 할당된 메모리 크기가 다를 수 있습니다.

![Untitled](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbuMzJP%2FbtqNQ3uH9Yn%2FvWjK9PUsOVVhl0Lwfz7cOK%2Fimg.png)

-   이러한 가변 할당은 고정 할당과 달리 `외부 단편화`(`External Fragmentation`)라는 문제를 발생시킬 수 있는데, 할당과 해제를 반복하다보면, 중간중간에 생기는 `제대로 사용할 수 없는 빈 공간`이 바로 그것입니다. 외부 단편화가 골칫거리인 이유는 각각의 단편화의 크기는 작을지라도, 전부 모으면 새로운 프로세스를 하나 더 적재할 수 있을만큼 커지기 때문입니다. 이것은 가변 할당의 고질적인 단점입니다.

![Untitled](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbOukea%2FbtqNQaA6cTI%2Fptl5JUH2ERYwcDs2acHdY0%2Fimg.png)

-   장점 : 필요로 하는 크기 만큼의 공간만 할당하면 된다.
-   단점 : 관리가 어렵다. 외부 단편화가 발생할 수 있다.
-   ex) segmentation